<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ¯ æ™¶æ™¶ â¤ï¸ & æ™–æ™– ğŸ’™ æŠ½ç­¾ç›’</title>
<style>
  /* body {
    font-family: "Helvetica Neue", sans-serif;
    background-color: #f7f8fc;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 50px;
  } */
    /* body {
    /* font-family: "Helvetica Neue", sans-serif; */
    /* background: linear-gradient(180deg, #f9faff 0%, #fff5f7 100%); */
    /* background-color: #75c492; /* æŸ”ç²‰åº•è‰² */
    /* display: flex;
    flex-direction: column;
    align-items: center;
    padding: 60px 0;
    min-height: 100vh;
    } */ 
     body {
  background: 
    linear-gradient(rgba(239, 247, 243, 0.55), rgba(239, 247, 243, 0.9)),
    url("https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=1600&q=80");
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 60px 0;
  min-height: 100vh;
}

    .main-container {
  /* background: linear-gradient(180deg, #ffeef2 0%, #fff7fa 100%); */
  background: #ffffff; /* å†…éƒ¨åŒºåŸŸçº¯ç™½ */
  border-radius: 24px;
  box-shadow: 0 4px 24px rgba(255, 170, 185, 0.25);
  padding: 50px 60px;
  width: min(90%, 720px);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}


  h1 {
    font-size: 1.8em;
    display: flex;
    align-items: center;
    gap: 8px;
    position: relative;
  }
  #cloudSync {
    position: absolute;
    right: -40px;
    top: 2px;
    cursor: pointer;
    opacity: 0.85;
    transition: 0.3s;
  }
  #cloudSync:hover {
    opacity: 1;
    transform: scale(1.1);
  }
  #cloudSync svg {
    width: 26px;
    height: 26px;
    stroke: #9ac7ff;
    stroke-width: 1.8;
    fill: none;
  }
  #cloudSync.rotating {
    animation: spin 2s linear infinite;
    filter: drop-shadow(0 0 4px rgba(150, 200, 255, 0.6));
  }
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .input-section {
    display: flex;
    gap: 60px;
    margin-top: 30px;
  }
  .player {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .player input {
    width: 220px;
    padding: 10px;
    border: 2px solid transparent;
    border-radius: 8px;
    outline: none;
    text-align: center;
    font-size: 1em;
    margin-bottom: 12px;
  }
  #redInput { border-color: #ff6666; }
  #blueInput { border-color: #6699ff; }

  button {
    border: none;
    color: white;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1em;
    transition: 0.2s;
  }
  .red-btn { background-color: #ff6666; padding: 10px 25px; }
  .blue-btn { background-color: #6699ff; padding: 10px 25px; }
  .gray-btn { background-color: #999; padding: 10px 25px; }
  .big-btn {
    background: linear-gradient(to right, #ff6666, #6699ff);
    font-size: 1.3em;
    padding: 14px 50px;
    font-weight: bold;
  }
  button:hover { transform: scale(1.05); }

  .buttons {
    margin-top: 30px;
    display: flex;
    gap: 10px;
  }

  /* .buttons {
  margin-top: 20px;       /* ç¼©å°ä¸ä¸Šæ–¹è¾“å…¥æ¡†çš„è·ç¦» */
  margin-bottom: 1px;    /* å¢åŠ ä¸‹æ–¹å†…å®¹çš„è´´åˆæ„Ÿ */
  display: flex;
  gap: 16px;
  justify-content: center;
    } */


  .result {
    margin-top: 40px;
    font-size: 1.8em;
    font-weight: bold;
    text-align: center;
  }

  .storage, .trash {
    margin-top: 40px;
    width: 440px;
    background: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  .storage h3, .trash h3 { margin-bottom: 10px; }

  .tag {
    display: inline-block;
    padding: 6px 10px;
    border-radius: 8px;
    color: white;
    margin: 5px;
    font-size: 1em;
    cursor: pointer;
    user-select: none;
    transition: 0.15s;
  }
  .tag:hover { transform: scale(1.05); opacity: 0.85; }

  .red-tag { background-color: #ff7a7a; }
  .blue-tag { background-color: #7aa8ff; }

  .small-btn {
    background-color: #aaa;
    color: white;
    font-size: 0.8em;
    padding: 5px 12px;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 10px;
  }
  .small-btn:hover { background-color: #888; }

  .trash .tag { opacity: 0.8; }
  .status {
    margin-top: 10px;
    font-size: 0.9em;
    color: #8fb3ff; /* é»˜è®¤æµ…è“ */
    transition: color 0.3s;
  }

  .status.success {
  color: #ffb7c5; /* âœ… æˆåŠŸæç¤ºä¸ºæµ…ç²‰ */
}
</style>
</head>
<body>
  <div class="main-container">

    <h1>
        ğŸ’Œ æ™¶æ™¶ ğŸŒ¸ & æ™–æ™– ğŸ¦‹ æŠ½ç­¾ç›’
        <span id="cloudSync" title="ç‚¹å‡»æ‰‹åŠ¨åŒæ­¥">
        <svg viewBox="0 0 24 24"><path d="M3 15a4 4 0 0 1 4-4h1a5 5 0 0 1 9.9 1H19a3 3 0 0 1 0 6H8a5 5 0 0 1-5-5Z"/></svg>
        </span>
    </h1>
    <div class="status" id="status">â˜ï¸ äº‘ç«¯åŒæ­¥æœªå¼€å§‹</div>

    <div class="input-section">
        <div class="player">
        <label style="color:#ff6666;">æ™¶æ™¶ ğŸŒ¸ï¼š</label>
        <input id="redInput" placeholder="è¾“å…¥æ™¶æ™¶çš„æƒ³æ³•">
        <button class="red-btn" onclick="saveIdea('red')">ä¿å­˜æ™¶æ™¶çš„æƒ³æ³•</button>
        </div>
        <div class="player">
        <label style="color:#6699ff;">æ™–æ™– ğŸ¦‹ï¼š</label>
        <input id="blueInput" placeholder="è¾“å…¥æ™–æ™–çš„æƒ³æ³•">
        <button class="blue-btn" onclick="saveIdea('blue')">ä¿å­˜æ™–æ™–çš„æƒ³æ³•</button>
        </div>
    </div>
  </div>

  <div class="buttons">
    <button class="big-btn" onclick="decide()">ğŸ² éšæœºé€‰ä¸€ä¸ªï¼</button>
  </div>

  <div class="result" id="result"></div>

  <div class="storage">
    <h3> ğŸ“¬å·²ä¿å­˜çš„æƒ³æ³•</h3>
    <div><strong style="color:#ff6666;">æ™¶æ™¶ ğŸŒ¸ï¼š</strong><div id="redList"></div></div>
    <div style="margin-top:15px;"><strong style="color:#6699ff;">æ™–æ™– ğŸ¦‹ï¼š</strong><div id="blueList"></div></div>
  </div>

  <div class="trash">
    <h3>ğŸ—‘ï¸ åˆ é™¤åº“ <button class="small-btn" onclick="clearAll()">æ¸…ç©ºå…¨éƒ¨</button></h3>
    <div id="trashList"></div>
  </div>

<script>
const BIN_ID = "6905bfb243b1c97be99046f1";
const API_KEY = "$2a$10$Ozq5MzSkKtHX4.ihnr6N1epNk.Iy1iBKk0ET1/28gjkJYxgbCIrZ2";
const BASE = "https://api.jsonbin.io/v3";
const headers = { "Content-Type":"application/json", "X-Master-Key":API_KEY, "X-Bin-Meta":"false" };
const keyPrefix = "jjhh_";
let state = { redIdeas: [], blueIdeas: [], trash: [] };
const $ = id => document.getElementById(id);

async function fetchBin() {
  const r = await fetch(`${BASE}/b/${BIN_ID}/latest`, { headers });
  if (!r.ok) throw new Error("è¯»å–å¤±è´¥ " + r.status);
  return r.json();
}
async function putBin(data) {
  const r = await fetch(`${BASE}/b/${BIN_ID}`, { method:"PUT", headers, body:JSON.stringify(data) });
  if (!r.ok) throw new Error("ä¿å­˜å¤±è´¥ " + r.status);
  return r.json();
}

function render() {
  const list = (arr, side) => arr.length ? arr.map((v,i)=>`<span class="tag ${side}-tag" onclick="moveToTrash('${side}',${i})">${v}</span>`).join("") : "<em>æš‚æ— å†…å®¹~</em>";
  $("redList").innerHTML = list(state.redIdeas, "red");
  $("blueList").innerHTML = list(state.blueIdeas, "blue");
  $("trashList").innerHTML = state.trash.length ? state.trash.map((x,i)=>`
    <span class="tag ${x.side}-tag" onclick="restoreItem(${i})">${x.text}</span>
    <button class="small-btn" onclick="deleteForever(${i})">æ°¸ä¹…åˆ é™¤</button>
  `).join("<br>") : "<em>åˆ é™¤åº“ä¸ºç©º~</em>";
}

// function setStatus(text){$("status").textContent = text;}
function setStatus(text, type){
  const el = $("status");
  el.textContent = text;
  el.className = "status" + (type ? " " + type : "");
}

async function syncCloud() {
  const icon = $("cloudSync");
  icon.classList.add("rotating");
  setStatus("â˜ï¸ æ­£åœ¨åŒæ­¥ä¸­â€¦");
  try {
    const d = await fetchBin();
    state = { redIdeas: d.redIdeas||[], blueIdeas: d.blueIdeas||[], trash: d.trash||[] };
    render();
    setStatus("â˜ï¸ å·²åŒæ­¥åˆ°äº‘ç«¯");
  } catch (e) {
    setStatus("åŒæ­¥å¤±è´¥ï¼š" + e.message);
  } finally {
    icon.classList.remove("rotating");
  }
}

async function saveIdea(side){
  const input = $(side+"Input");
  const v = input.value.trim();
  if(!v) return alert("è¯·è¾“å…¥å†…å®¹ï¼");
  state[side+"Ideas"].push(v);
  render();
  input.value = "";
  try{
    setStatus("â˜ï¸ ä¿å­˜ä¸­â€¦");
    await putBin(state);
    setStatus("âœ¨ ä¿å­˜æˆåŠŸå¹¶åŒæ­¥åˆ°äº‘ç«¯", "success");
  }catch(e){
    setStatus("ä¿å­˜å¤±è´¥ï¼š" + e.message);
  }
}

function moveToTrash(side,i){
  const it={side,text:state[side+"Ideas"][i]};
  state[side+"Ideas"].splice(i,1);
  state.trash.push(it);
  render(); putBin(state);
}
function restoreItem(i){
  const {side,text}=state.trash[i];
  state[side+"Ideas"].push(text);
  state.trash.splice(i,1);
  render(); putBin(state);
}
function deleteForever(i){
  if(!confirm("ç¡®å®šæ°¸ä¹…åˆ é™¤å—ï¼Ÿ"))return;
  state.trash.splice(i,1);
  render(); putBin(state);
}
function decide(){
  const red=state.redIdeas,blue=state.blueIdeas;
  if(!red.length&&!blue.length) return $("result").textContent="è¯·å…ˆä¿å­˜ä¸€äº›æƒ³æ³•ï¼";
  let s=Math.random()<0.5?"red":"blue";
  if(s==="red"&&!red.length)s="blue";if(s==="blue"&&!blue.length)s="red";
  const pool=state[s+"Ideas"],choice=pool[Math.floor(Math.random()*pool.length)];
  $("result").innerHTML=s==="red"?`<span style="color:#ff6666;">ä»Šå¤©é€‰ä¸­æ™¶æ™¶ â¤ï¸ï¼š</span><span class="tag red-tag" style="font-size:1.3em;">${choice}</span>`:`<span style="color:#6699ff;">ä»Šå¤©é€‰ä¸­æ™–æ™– ğŸ’™ï¼š</span><span class="tag blue-tag" style="font-size:1.3em;">${choice}</span>`;
}
function clearAll(){
  if(confirm("ç¡®å®šæ¸…ç©ºå…¨éƒ¨è®°å½•å’Œåˆ é™¤åº“å—ï¼Ÿ")){
    state={redIdeas:[],blueIdeas:[],trash:[]};
    render(); putBin(state);
  }
}

$("cloudSync").onclick=syncCloud;
syncCloud();
</script>
</body>
</html>
